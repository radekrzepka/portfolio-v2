---
import { ArrowRight } from "lucide-react";
import { getRelativeLocaleUrl } from "astro:i18n";
import { getProjects, useTranslations } from "@/i18n";
import SectionContainer from "@/layouts/SectionContainer.astro";
import ProjectCard from "../projects/ProjectCard.astro";
import { Button } from "../ui/button";

interface Props {
  locale: "en" | "pl";
}

const { locale } = Astro.props;
const projects = getProjects(locale);
const featuredProjects = projects.filter((p) => p.featured === true);
const t = useTranslations(locale);
---

<SectionContainer>
  <h2 class="text-3xl font-bold tracking-tighter mb-6">{t("projects.featured")}</h2>
  <div
    class="bg-background rounded-xl p-6 shadow-lg dark:bg-zinc-900 dark:border dark:border-zinc-800"
  >
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {featuredProjects.map((project) => (
        <ProjectCard project={project} locale={locale} />
      ))}
    </div>

    <div class="flex justify-center mt-8">
      <a href={getRelativeLocaleUrl(locale, "projects")}>
        <Button variant="outline" size="lg">
          {t("projects.viewAll")} <ArrowRight className="ml-2 h-4 w-4" />
        </Button>
      </a>
    </div>
  </div>
</SectionContainer>
